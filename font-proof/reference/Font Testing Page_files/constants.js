var GRUMPIES = {
    'short': {
        'text': "(edit me) I felt anxious that I would never quench my desire for a job at Pizza King. Vexed, I realize pangram number one two three four could qualify as a joke. “Oh Suzie Q., baby I love you”: Jeff awoke to XM-radio playing CCR.",
        'columns': [ // single column
            {
                sizes: [92, 86, 80, 76, 72, 68, 66, 64, 62, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10],
                innerblock: 'div'
            }
        ],
        'tab': '#headlines'
    },

    'long': {
        'text': "¶ Absolute Zero -0-, Ælien Armpit, {Ameþyst}, Antique Brœss, •Asparagus, Aztec Gold, Banana Mania, Big Foot Feet, Bittersweet Shimmer, Blazing Bonfire, Blueberry, Bubble (Gum), Burnished Brown, Caribbean Current, Chartreuse, Cinnamon Satin 2, Cyber@Grape, ‹Daffodil›, Dirt, Eerie Black 33, “Electric Lime”, Eucalyptus, Fern, Fuchsia, Fuzzy Wuzzy, Gargoyle Gas, Goldenrod, Grand Canyon, Green Sheen, Hot Magenta, Illuminating Emerald, »Indian« Red, Jazzberry Jam, Lapiæ Lazuli, Lemon Glacier, Lumber, Macaroni & Cheese, Magic* Mint, Maui Sunset, Mummy’s Tomb, Mystic Maroon, 1794 Neon Carrots, Off-Road, Ogre Odor, Periwinkle, Piggy Pink, Pixie Powder, Prussiaŋ Blue, Quick §ilver, Razzmatazz, Rose Quartz, Screamin’ Green 8, Shimmering Blush, [Shrimp Cocktail], Sizzling Sunset, Slimy Green, Smokey Topaz, Spring Frost, Steel Teal, Sunburnt Cyclops, Surf’s Up, Tickle Me Pink!, Tumbleweed, Twilight Lavender, Ultra? Red, Vivid Violet, Warm And Fuzzy, 99 Winter Wizards, Yosemite Campfire.",
        'columns': [ // three columns
            {sizes: [24, 20, 17, 14, 12, 10, 9], innerblock: '.textsettingCol3'},

        ],
        'tab': '#text'
    },

    'lowercaseShort': {
        'text': "the five boxing wizards jump quickly pack my red box with five dozen quality jugs a very big box sailed up then whizzed quickly from japan",
        'columns': [
            {sizes: [72, 60, 48, 36, 30, 24, 18], innerblock: 'div:first'}
        ],
        'tab': '#lowercases'
    },

    'lowercaseLong': {
        'text': "¶ Absolute Zero -0-, Ælien Armpit, {Ameþyst}, Antique Brœss, •Asparagus, Aztec Gold, Banana Mania, Big Foot Feet, Bittersweet Shimmer, Blazing Bonfire, Blueberry, Bubble (Gum), Burnished Brown, Caribbean Current, Chartreuse, Cinnamon Satin 2, Cyber@Grape, ‹Daffodil›, Dirt, Eerie Black 33, “Electric Lime”, Eucalyptus, Fern, Fuchsia, Fuzzy Wuzzy, Gargoyle Gas, Goldenrod, Grand Canyon, Green Sheen, Hot Magenta, Illuminating Emerald, »Indian« Red, Jazzberry Jam, Lapiæ Lazuli, Lemon Glacier, Lumber, Macaroni & Cheese, Magic* Mint, Maui Sunset, Mummy’s Tomb, Mystic Maroon, 1794 Neon Carrots, Off-Road, Ogre Odor, Periwinkle, Piggy Pink, Pixie Powder, Prussiaŋ Blue, Quick §ilver, Razzmatazz, Rose Quartz, Screamin’ Green 8, Shimmering Blush, [Shrimp Cocktail], Sizzling Sunset, Slimy Green, Smokey Topaz, Spring Frost, Steel Teal, Sunburnt Cyclops, Surf’s Up, Tickle Me Pink!, Tumbleweed, Twilight Lavender, Ultra? Red, Vivid Violet, Warm And Fuzzy, 99 Winter Wizards, Yosemite Campfire.",
        'columns': [
            {sizes: [16, 15, 14], innerblock: '.textsettingCol1'},
            {sizes: [13, 12, 11, 10], innerblock: '.textsettingCol2'}
        ],
        'tab': '#lowercases'
    },

    'adhesionShort': {
        'text': "Grab sample text from the above links and paste here",
        'columns': [
            {sizes: [72, 60, 48, 36], innerblock: 'div:first'}
        ],
        'tab': '#adhesion'
    },

    'adhesionLong': {
        'text': "Go get some more dummy text from JAF Text Generator or Adhesiontext & paste it in here right now (or just make your own, whatever). Go get some more dummy text from JAF Text Generator or Adhesiontext & paste it in here right now (or just make your own, whatever). Go get some more dummy text from JAF Text Generator or Adhesiontext & paste it in here right now (or just make your own, whatever). Go get some more dummy text from JAF Text Generator or Adhesiontext & paste it in here right now (or just make your own, whatever). Go get some more dummy text from JAF Text Generator or Adhesiontext & paste it in here right now (or just make your own, whatever). Go get some more dummy text from JAF Text Generator or Adhesiontext & paste it in here right now (or just make your own, whatever).",
        'columns': [
            {sizes: [30, 24, 18, 15, 13, 12, 11, 10], innerblock: '.textsettingCol3'},
        ],
        'tab': '#adhesion'
    },

    'hamburgefonstivShort': {
        'text': "fortieth boring trait favoring barrage referring thrusting tannest embargo sausage gaining astutest augur hibernate variant hearse beggaring foresee eagerer hearten ensnaring tufting interstate meager veneration stigma feminine tabbing noising trimming throbbing ransoming stiffen oaring fishing rehire overbore bonniest ravishment teensiest mintier shriven unforeseen overrate surgeon smarter submarine revenging assuaging masher amnesia insentient rehashing fresher buttering sorghum thine sitter month serer minting variate torsion gaunt",
        'columns': [
            {sizes: [72, 60, 48, 36, 30, 24, 18], innerblock: 'div:first'}
        ],
        'tab': '#hamburgefonstiv'
    },

    'hamburgefonstivLong': {
        'text': "fortieth boring trait favoring barrage referring thrusting tannest embargo sausage gaining astutest augur hibernate variant hearse beggaring foresee eagerer hearten ensnaring tufting interstate meager veneration stigma feminine tabbing noising trimming throbbing ransoming stiffen oaring fishing rehire overbore bonniest ravishment teensiest mintier shriven unforeseen overrate surgeon smarter submarine revenging assuaging masher amnesia insentient rehashing fresher buttering sorghum thine sitter month serer minting variate torsion gaunt berthing goofiest sober informing sourer tonight neigh iratest torte situate rheumier antagonist serening motion guise unseeing masseuse",
        'columns': [
            {sizes: [16, 15, 14], innerblock: '.textsettingCol1'},
            {sizes: [13, 12, 11, 10], innerblock: '.textsettingCol2'}
        ],
        'tab': '#hamburgefonstiv'
    },

    'caps': {
        'text': "arrowroot barley chervil dumpling endine flaxseed garbanzo hijiki ishtu jicama kale lychee marjoram nectarine oxtail pizza quinoa roquefort squash tofu uppuma vanilla wheat xergis yogurt & zwieback! 012345678&9?",
        'columns': [
            {sizes: [90, 45], innerblock: 'div'}
        ],
        'tab': '#caps'
    },

	'allcaps': {
	    'text': "ARROWROOT BARLETY CHERVIL DUMPLING ENDINE FLAXSEED GARBANZO HIJIKI ISHTU JICAMA KALE LYCHEEN MARJORAM NECTARINE OXTAIL PIZZA QUINOA ROQUEFORT SQUASH TOFU UPPUMA VANILLA WHEAT XERGIS YOGURT ZWEIBACK 0 1 2 3 4 5 6 7 8 9 ! ?",
	    'columns': [
	        {sizes: [60, 48, 36, 30, 28, 24, 20, 18, 16, 14, 13], innerblock: 'div'}
	    ],
	    'tab': '#allcaps'
	}
	
};

var hintsCaps = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var hintsLower = "abcdefghijklmnopqrstuvwxyz.:;,";
var hintsNumbers= "1234567890 @&amp;!?#$€%";


function eventTextLineChange(e) {
    var $this = $(this);
    bulkChangeTextForTab(e.data.grumpy, $this.text(), $this);
}


function onblur() {
    var $this = $(this);
    var text = $this.html();
    if ($this.data('enter') !== text) {
        $this.data('enter', text);
        $this.trigger({type: 'change', action : 'save'});
    }
    return $this;
}


function onkeyup() {
    var $this = $(this);
    var text = $this.html();
    if ($this.data('before') !== text) {
        $this.data('before', text);
        $this.trigger({type: 'change', action : 'update'});
    }
    return $this;
}


function onfocus() {
    var $this = $(this);
    $this.data('enter', $this.html());
    $this.data('before', $this.html());
    return $this;
}


function setColumnTemplate(container, grumpy) {
    for (var k = 0; k < grumpy.columns.length; k++) {

        var sizes = grumpy.columns[k].sizes;
        var block = container.find(grumpy.columns[k].innerblock);
        for (var i = 0; i < sizes.length; i++) {
            fontsize = sizes[i].toString();
            block.append($('<p>').addClass('sizelabel').text(fontsize + 'px'));

            var textline = $('<p>').addClass('textline')
                .css('font-size', fontsize + 'px')
                .attr('contenteditable', true)
                .text(grumpy.text)
                .on('focus', onfocus)
                .on('keyup paste', onkeyup)
                .on('blur', onblur)
                .on('change', {'grumpy': grumpy}, eventTextLineChange);

            block.append(textline);
            //block.append($('<p>&nbsp;</p>'));
        }
    }
}

function setColumnTemplate2(container, grumpy) {
    for (var k = 0; k < grumpy.columns.length; k++) {

        var sizes = grumpy.columns[k].sizes;
        var block = container.find(grumpy.columns[k].innerblock);
        for (var i = 0; i < sizes.length; i++) {
            fontsize = sizes[i].toString();
            block.append($('<p>').addClass('sizelabel').text(fontsize + 'px'));

            var textline = $('<p>').addClass('textline')
                .css('font-size', fontsize + 'px')
                .attr('contenteditable', true)
                .text(grumpy.text)
                .on('focus', onfocus)
                .on('keyup paste', onkeyup)
                .on('blur', onblur)
                .on('change', {'grumpy': grumpy}, eventTextLineChange);

            block.append(textline);
            block.append($('<p>&nbsp;</p>'));
        }
    }
}


function setSplitSingleToDual(container, grumpies_short, grumpies_long) {
    setColumnTemplate(container, grumpies_short);
    setColumnTemplate(container, grumpies_long);
}


function bulkChangeTextForTab(grumpy, value, except) {
    for (var i = 0; i < grumpy.columns.length; i++) {
        $(grumpy.tab).find(grumpy.columns[i].innerblock).find('.textline').not(except).text(value);
    }
}


function prepareAndShowFontLayout() {

    setColumnTemplate($('#headlines'), GRUMPIES.short);

    setColumnTemplate2($('#text'), GRUMPIES.long);

    var $lowercases = $('#lowercases');
    setColumnTemplate($lowercases, GRUMPIES.lowercaseShort);
    setColumnTemplate2($lowercases, GRUMPIES.lowercaseLong);

    var $roll = $('#adhesion');
    setColumnTemplate($roll, GRUMPIES.adhesionShort);
    setColumnTemplate2($roll, GRUMPIES.adhesionLong);


    var $caps = $('#caps');
    setColumnTemplate2($caps, GRUMPIES.caps);
    
    var $allcaps = $('#allcaps');
    setColumnTemplate2($allcaps, GRUMPIES.allcaps);

    var hints_caps = $('.hints-caps');
    var hints_numbers = $('.hints-numbers');
    var hints_lower = $('.hints-lower');
    hints_lower.html(hints_lower.html() + hintsLower);
    hints_caps.html(hints_caps.html() + hintsCaps);
    hints_numbers.html(hints_numbers.html() + hintsNumbers);
}